
<link rel="import" type="html" href="../../polymer/polymer.html">


<dom-module id="br-browser-update">

<template>
  <div id="browser-update" class="modal" aria-hidden="true">
    <div class="modal-body">
      <h1>Ops!!</h1>
      <p>Parece que seu navegador bla bla bla.</p>
      <div class="stand-row">
        <div class="stand-column">
          <a href="https://www.google.com/chrome/browser/"><img src="assets/chrome-logo.png" /></a>
        </div>
        <div class="stand-column">
          <a href="https://www.mozilla.org/pt-BR/"><img src="assets/firefox-logo.png" /></a>
        </div>
        <div class="stand-column">
        <a href="http://www.opera.com/pt-br"><img src="assets/opera-logo.png" /></a>
        </div>
      </div>
    </div>
  </div>
</template>

</dom-module>

<script>
  Polymer({

    is: 'br-browser-update',

    properties: {


    },

    // Element Lifecycle

    ready: function() {

      this._disableOldIeVersion(10);

    },

    _disableOldIeVersion: function(lowerThan){

      var currentBrowser = this._getCurrentBrowser();      

      browserSplit = currentBrowser.split(" ");
      parseInt(browserSplit[1]); 
      
      if (browserSplit[0] == "MSIE" && browserSplit[1] < lowerThan) {

        var modal = document.getElementById("browser-update");        

        modal.className = modal.className + " visible";
      };

    },

    _getCurrentBrowser: function(){

      return (function(){
        var ua= navigator.userAgent, tem, 
        M= ua.match(/(msie|trident(?=\/))\/?\s*(\d+)/i) || [];
        if(/trident/i.test(M[1])){
          tem=  /\brv[ :]+(\d+)/g.exec(ua) || [];
          return 'IE '+(tem[1] || '');
        }
        
        if(M[1]=== 'Chrome'){
          tem= ua.match(/\bOPR\/(\d+)/);
          if(tem!= null) return 'Opera '+tem[1];
        }
        
        M= M[2]? [M[1], M[2]]: [navigator.appName, navigator.appVersion, '-?'];
        if((tem= ua.match(/version\/(\d+)/i))!= null) M.splice(1, 1, tem[1]);
        return M.join(' ');

      })();

    },

  });

</script>
